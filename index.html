<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â—‹â–³â–¡S ë„í˜• ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</title>
<style>
  body {
    font-family: "Pretendard", sans-serif;
    background: #fdf8f7;
    text-align: center;
    color: #2a2a75;
    margin: 0;
    padding: 20px;
  }
  h1 {
    font-size: 22px;
  }
  p {
    font-size: 14px;
    line-height: 1.5em;
  }
  canvas {
    background: transparent;
    border: 2px solid #c58a6a;
    position: relative;
  }
  #container {
    position: relative;
    display: inline-block;
    margin: 20px;
  }
  .inner {
    position: absolute;
    border: 2px solid #c58a6a;
    width: 180px;
    height: 180px;
    top: 90px;
    left: 90px;
  }
  .buttons {
    margin-top: 10px;
  }
  button {
    font-size: 22px;
    margin: 3px;
    padding: 8px 12px;
    cursor: pointer;
    border: 1px solid #888;
    border-radius: 5px;
    background: white;
  }
  #result {
    text-align: left;
    width: 360px;
    margin: 20px auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    padding: 10px;
    line-height: 1.5em;
  }
</style>
</head>
<body>

<h1>â—‹â–³â–¡S ë„í˜• ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</h1>
<p>1) ê°€ì¥ ë§ˆìŒì— ë“œëŠ” ë„í˜•ì„ ì„ íƒí•´ ìº”ë²„ìŠ¤ ìœ„ì— 3ë²ˆ ë°°ì¹˜í•˜ì„¸ìš”.<br>
2) ë‚˜ë¨¸ì§€ ë„í˜•ë„ ê°ê° 1ë²ˆì”© ììœ ë¡­ê²Œ ë°°ì¹˜í•˜ì„¸ìš”.</p>

<div id="container">
  <canvas id="canvas" width="360" height="360"></canvas>
  <div class="inner"></div>
</div>

<div class="buttons">
  <button data-shape="circle">â—‹</button>
  <button data-shape="triangle">â–³</button>
  <button data-shape="square">â–¡</button>
  <button data-shape="wave">S</button>
  <button id="analyze">ê²°ê³¼ ë³´ê¸°</button>
</div>

<div id="result"></div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let shapes = [];
let currentShape = null;

// ë„í˜• ì„ íƒ
document.querySelectorAll('button[data-shape]').forEach(btn => {
  btn.addEventListener('click', () => {
    currentShape = btn.dataset.shape;
  });
});

// í´ë¦­ ì‹œ ë„í˜• ì¶”ê°€
canvas.addEventListener('click', (e) => {
  if (!currentShape) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const size = 40;
  shapes.push({ type: currentShape, x, y, size });
  drawShapes();
});

function drawShapes() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  shapes.forEach(s => {
    ctx.lineWidth = 2;
    ctx.strokeStyle = "#2a2a75";
    switch(s.type) {
      case "circle":
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size/2, 0, Math.PI*2);
        ctx.stroke();
        break;
      case "triangle":
        ctx.beginPath();
        ctx.moveTo(s.x, s.y - s.size/2);
        ctx.lineTo(s.x - s.size/2, s.y + s.size/2);
        ctx.lineTo(s.x + s.size/2, s.y + s.size/2);
        ctx.closePath();
        ctx.stroke();
        break;
      case "square":
        ctx.strokeRect(s.x - s.size/2, s.y - s.size/2, s.size, s.size);
        break;
      case "wave":
        ctx.beginPath();
        for (let i=0; i<2; i++){
          ctx.moveTo(s.x - s.size/2, s.y + i*10);
          ctx.bezierCurveTo(s.x - s.size/4, s.y - 10 + i*10, s.x + s.size/4, s.y + 10 + i*10, s.x + s.size/2, s.y + i*10);
        }
        ctx.stroke();
        break;
    }
  });
}

// ë„í˜• í•´ì„ í•¨ìˆ˜
document.getElementById('analyze').addEventListener('click', () => {
  let summary = "";
  if (shapes.length === 0) {
    document.getElementById('result').innerHTML = "ë„í˜•ì„ ë¨¼ì € ë°°ì¹˜í•˜ì„¸ìš”!";
    return;
  }

  // ê° ë„í˜•ì˜ í‰ê·  ì¢Œí‘œ ê³„ì‚°
  const center = 180; // ìº”ë²„ìŠ¤ ì¤‘ì‹¬
  shapes.forEach(s => {
    let vert = s.y < 120 ? "ìƒë‹¨" : s.y > 240 ? "í•˜ë‹¨" : "ì¤‘ë‹¨";
    let hori = s.x < 120 ? "ì¢Œì¸¡" : s.x > 240 ? "ìš°ì¸¡" : "ì¤‘ì•™";
    s.zone = vert + " " + hori;
  });

  const counts = { circle:0, triangle:0, square:0, wave:0 };
  shapes.forEach(s => counts[s.type]++);

  // ë„í˜•ë³„ ê¸°ë³¸ ì„±í–¥
  const traits = {
    circle: "ê°ì„±ì ì´ë©° ë”°ëœ»í•˜ê³  ê´€ê³„ ì¤‘ì‹¬ì ì¸ ì„±í–¥",
    triangle: "ëª©í‘œ ì§€í–¥ì ì´ê³  ë¦¬ë”ì‹­ì´ ê°•í•œ ì„±í–¥",
    square: "ì‹ ì¤‘í•˜ê³  ì²´ê³„ì ì´ë©° ì•ˆì •ê°ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥",
    wave: "ì°½ì˜ì ì´ê³  ìœ ì—°í•˜ë©° ììœ ë¡œìš´ ì‚¬ê³ ë¥¼ ì§€ë‹Œ ì„±í–¥"
  };

  // ë„í˜•ë³„ ìƒíƒœ ë¶„ì„
  let analysis = [];
  shapes.forEach(s => {
    let state = "";
    if (s.zone.includes("ìƒë‹¨")) state = "í™œì„±í™”ëœ ì¥ì ì´ ë“œëŸ¬ë‚˜ëŠ” ì‹œê¸°";
    else if (s.zone.includes("ì¤‘ë‹¨")) state = "ì ì¬ë ¥ì´ ë¨¸ë¬´ëŠ” ì•ˆì •ì  ìƒíƒœ";
    else state = "ì—ë„ˆì§€ê°€ ë–¨ì–´ì ¸ ë‚´ë©´ì  ê³ ë¯¼ì´ ìˆì„ ê°€ëŠ¥ì„±";

    analysis.push(`${s.type === "circle"?"â—‹":s.type==="triangle"?"â–³":s.type==="square"?"â–¡":"S"}: ${traits[s.type]}ì´ë©°, í˜„ì¬ëŠ” ${state}ì…ë‹ˆë‹¤.`);
  });

  // ê°€ì¥ ë§ì´ ë“±ì¥í•œ ë„í˜• = ì£¼ ì„±ê²©
  const dominant = Object.keys(counts).reduce((a,b) => counts[a] > counts[b] ? a : b);
  const scent = {
    circle: "ë”°ëœ»í•˜ê³  í¬ê·¼í•œ í”Œë¡œëŸ´ í–¥",
    triangle: "ì‹œíŠ¸ëŸ¬ìŠ¤ ê³„ì—´ì˜ ìƒì¾Œí•œ í–¥",
    square: "ìš°ë””í•˜ê±°ë‚˜ í—ˆë¸Œ ê³„ì—´ì˜ ì•ˆì •ê° ìˆëŠ” í–¥",
    wave: "ì°½ì˜ì ì¸ ë¬´ë“œì˜ ë¨¸ìŠ¤í¬Â·ë°”ë‹ë¼ í–¥"
  };

  summary += `<b>ì„±ê²© ìš”ì•½</b><br>${traits[dominant]}ì´(ê°€) ì£¼ë¥¼ ì´ë£¨ë©°,<br>`;
  summary += "ë„í˜•ì˜ ë°°ì¹˜ë¡œ ë³´ì•„ ì‹¬ë¦¬ì  ê· í˜•ê³¼ ì—ë„ˆì§€ì˜ íë¦„ì´ ë“œëŸ¬ë‚©ë‹ˆë‹¤.<br>";
  summary += "í™œì„±í™”ëœ ë„í˜•ê³¼ í•˜ë‹¨ì˜ ë„í˜•ì„ í•¨ê»˜ ì°¸ê³ í•˜ë©´ í˜„ì¬ ìƒíƒœë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>";
  summary += `<b>ì¶”ì²œ í–¥ê¸°:</b> ${scent[dominant]} ğŸŒ¿<br><br>`;
  summary += analysis.join("<br>");

  document.getElementById('result').innerHTML = summary;
});
</script>

</body>
</html>