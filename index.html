<!-- ğŸ“„ ì „ì²´ HTML ì‹œì‘ -->
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>â—‹â–³â–¡S ë„í˜• í…ŒìŠ¤íŠ¸</title>
<style>
  :root{
    --bg:#fbf6f4;
    --title:#3c2f91;
    --frame:#b9764f;
    --accent:#3c2f91;
    --btn-border:#e6e6e6;
  }
  html,body{height:100%;margin:0}
  body{
    font-family:"Pretendard","Noto Sans KR",system-ui,-apple-system,Arial;
    background:var(--bg);color:#222;
    display:flex;flex-direction:column;align-items:center;
    padding:20px 16px 40px;
  }
  h1{color:var(--title);font-size:34px;margin:8px 0 6px;letter-spacing:2px}
  .subtitle{color:var(--title);text-align:center;font-size:14px;margin:0 0 18px}

  /* ìº¡ì²˜í•  ì˜ì—­ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” div */
  #captureWrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .board-wrap{position:relative;width:420px;max-width:92vw}
  #board{
    width:360px;height:360px;margin:0 auto;
    background:#fff;border:4px solid var(--frame);box-sizing:border-box;position:relative;
    touch-action:none; 
  }
  #inner{
    position:absolute;width:180px;height:180px;left:50%;top:50%;
    transform:translate(-50%,-50%);
    border:4px dashed rgba(183,132,112,0.35);pointer-events:none;
  }
  
  .tools{display:flex;gap:12px;justify-content:center;margin-top:18px;flex-wrap:wrap}
  .tool{width:64px;height:64px;border-radius:14px;border:2px solid var(--btn-border);
    display:flex;align-items:center;justify-content:center;background:#fff;
    font-size:28px;cursor:pointer;box-shadow:0 6px 20px rgba(60,47,145,0.06);
    transition:transform .12s,background .12s,border-color .12s}
  .tool.active{background:#efeefc;border-color:var(--accent);box-shadow:0 10px 26px rgba(60,47,145,0.14)}

  .actions{display:flex;gap:12px;justify-content:center;margin-top:12px;flex-wrap:wrap}
  .btn{padding:10px 16px;border-radius:10px;border:1px solid var(--btn-border);
    background:#fff;color:var(--accent);font-weight:600;cursor:pointer;}
  .btn.primary{background:var(--accent);color:#fff;border:none;box-shadow:0 6px 18px rgba(60,47,145,0.16)}

  #resultBox{width:420px;max-width:92vw;margin:18px auto 0;text-align:left}
  .card{background:#fff;padding:14px;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,0.06)}
  .card h3{margin:0 0 8px;color:var(--accent)}
  .line{margin:8px 0;color:#222;line-height:1.6}
  .scent{margin-top:8px;color:#4b4b4b;font-weight:600}

  @media(max-width:420px){
    #board{width:320px;height:320px}
    #inner{width:160px;height:160px}
    .tool{width:56px;height:56px;font-size:24px}
    #resultBox{width:320px}
  }
</style>
</head>
<body>

<h1>â—‹â–³â–¡S ë„í˜• í…ŒìŠ¤íŠ¸</h1>
<div class="subtitle">
  4ê°œì˜ ë„í˜• ì¤‘ ê°€ì¥ ë§ˆìŒì— ë“œëŠ” ë„í˜•ì„ 3ë²ˆ, ë‚˜ë¨¸ì§€ë¥¼ 1ë²ˆì”© ë°°ì¹˜í•˜ì„¸ìš”.
</div>

<!-- âœ… ìº¡ì²˜ ì˜ì—­ ì‹œì‘ -->
<div id="captureWrapper">

  <div id="captureArea">
    <div class="board-wrap">
      <div id="board"><div id="inner"></div></div>
    </div>

    <div class="tools">
      <div class="tool active" data-shape="circle">â—‹</div>
      <div class="tool" data-shape="triangle">â–³</div>
      <div class="tool" data-shape="square">â–¡</div>
      <div class="tool" data-shape="wave">S</div>
    </div>

    <div class="actions">
      <button id="undo" class="btn">Undo</button>
      <button id="reset" class="btn">ì´ˆê¸°í™”</button>
      <button id="analyze" class="btn primary">ê²°ê³¼ ë³´ê¸°</button>
    </div>
  </div>

  <div id="resultBox">
    <div class="card">
      <h3>ê²€ì‚¬ ê²°ê³¼</h3>
      <div id="resultContent">
        <div class="line">ë„í˜•ì„ ë°°ì¹˜í•œ ë’¤ â€˜ê²°ê³¼ ë³´ê¸°â€™ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
      </div>
    </div>
  </div>

</div>
<!-- âœ… ìº¡ì²˜ ì˜ì—­ ë -->

<div class="actions" style="margin-top:20px;">
  <button id="saveImage" class="btn">ğŸ“¸ ê²°ê³¼ PDF ì €ì¥</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
// ğŸ“„ ì „ì²´ ìº¡ì²˜ (ë„í˜• + ê²°ê³¼)
document.getElementById('saveImage').addEventListener('click', () => {
  const captureTarget = document.getElementById('captureWrapper'); // ğŸ¯ ìº¡ì²˜ ë²”ìœ„ ë³€ê²½ë¨

  html2canvas(captureTarget, {
    scale: 3,
    scrollX: 0,
    scrollY: 0,
    useCORS: true
  }).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({
      orientation: 'portrait',
      unit: 'mm',
      format: 'a4'
    });

    const pdfWidth = 210;
    const pdfHeight = 297;
    const imgWidth = pdfWidth - 20;
    const imgHeight = canvas.height * imgWidth / canvas.width;

    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
    pdf.save('ë„í˜•ì‹¬ë¦¬í…ŒìŠ¤íŠ¸_ê²°ê³¼.pdf');
  })
  .catch(err => {
    console.error('PDF ìƒì„± ì‹¤íŒ¨:', err);
    alert('PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  });
});
</script>

</body>
</html>